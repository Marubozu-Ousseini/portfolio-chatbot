@startuml Sequence
skinparam backgroundColor white
skinparam defaultFontName Helvetica
skinparam sequenceMessageAlign center

actor User as U
participant "Widget\n(JS)" as W
participant "API Gateway" as G
participant "Lambda\n(index.js)" as L
database "S3\nRAG Data" as S
collections "CloudWatch\nLogs" as CW

U -> W : Type message
W -> G : POST /chat {message, name?}
G -> L : Invoke
alt French input
  L -> G : 200 { message: disclaimer }
else Fast-path (contact/skills/certs/teaching)
  L -> G : 200 { message }
else AI projects
  L -> S : getRelevantContext()
  L -> G : 200 { message }
else General RAG
  L -> S : getRelevantContext()
  L -> G : 200 { message }
end
L -> CW : log events
G -> W : 200 { message }
W -> U : Render reply
@enduml